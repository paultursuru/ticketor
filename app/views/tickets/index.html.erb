<div class="flex w-2/3 mb-5">
  <%= turbo_frame_tag "first_turbo_frame", class: "flex w-full justify-between" do %>
    <h1 class="text-3xl font-bold underline">Tickets</h1>

    <% if current_user.student? %>
      <% if current_user.tickets.pending.empty? %>
        <%= link_to sanitize("<i class='fa-solid fa-plus'></i> New ticket"),
                    new_ticket_path,
                    data: { turbo_frame: dom_id(@ticket) },
                    class: "rounded bg-purple-100 text-purple-900 border-purple-900 py-2 px-4" %>
      <% end %>
    <% end %>
  <% end %>
</div>


<div class="tickets w-2/3">
  <%= turbo_frame_tag @ticket %>  <%# frame tag targeted when clicking on new path %>
  <%= turbo_stream_from "tickets" %>  <%# connecting to broadcast / stream %>
  <%= turbo_frame_tag "tickets", class:"#{'teacher' if current_user.teacher?}", data: {controller: "ticketable", ticketable_cancel_id_value: "cancel-#{current_user.id}"} do %> <%# frame tag targeted after create %>
    <%= render @tickets %>
  <% end %>
</div>
